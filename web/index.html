<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Hive Mind</title>
    <link rel="stylesheet" href="styles.css">
    <script>
      var Module = { canvas: (function() { return document.getElementById('canvas') })() };
      var gameSize;
      var pstr;
    </script>
</head>

<body data-token="TOKEN">
  <div class="submitForm">
    <form name="playform" autocomplete="off" method="post">
      <fieldset>
	<legend>Game size:</legend>
	<div>
	  <input type="radio" id="choice1" name="gameSize" value="90" />
	  <label for="choice1">Small</label>

	  <input type="radio" id="choice2" name="gameSize" value="120" checked />
	  <label for="choice2">Medium</label>

	  <input type="radio" id="choice3" name="gameSize" value="150" />
	  <label for="choice3">Large</label>
	</div>
      </fieldset>
      <br>
      You will be matched with the first player in the queue
      with the same text (case-sensitive) as you enter in the box.
      You may only enter up to 16 alphanumeric characters;
      no spaces or special characters.
      Leave the input blank to play with anyone.
      <div>
	<br>
	<input type="text" autocomplete="off" placeholder="Any" id="pstr-input" name="pstr" pattern="^$|[a-zA-Z0-9]+" maxlength="16">
	<br>
	<button type="submit">Play</button>
      </div>
    </form>
  </div>
  <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
  <script>
    document.getElementById('pstr-input').oninvalid = function(event) {
	event.target.setCustomValidity('Please enter only letters and numbers, or leave the field blank.');
    }
    document.forms['playform'].addEventListener('submit', function (event) {
	event.preventDefault();
	this.style['display']= 'none';
	gameSize = parseInt(this.elements['gameSize'].value);
	pstr = this.elements['pstr'].value;
	var loadscript = document.createElement('script');
	loadscript.setAttribute('src','loadgame.js');
	document.head.appendChild(loadscript);
    });
  </script>
</body>
</html>
